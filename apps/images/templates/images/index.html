{% extends "dashboard_template.html" %}
{% load imagekit %}

{% block dashboard_title %}
	<h1 class="page-header">
		Images
	</h1>
{% endblock %}

{% block dashboard_content %}

	<div class="row">
		<div class="col-md-4">
			<form enctype="multipart/form-data" action="" method="post" class="form">{% csrf_token %}
				<div class="row">
					<div class="col-md-12">
						{% include "error_list.html" with error_list=form.non_field.errors %}
					</div>
				</div>
				<!--NAME and GALLERY-->
				<div class="row">
					<div class="col-md-12">
						<p>
							<label>Name:</label>
							{{ form.name }}
						</p>
						{% include "error_list.html" with error_list=form.name.errors %}
					</div>
				</div>
				<!--IMAGE-->
				<div class="row">
					<div class="col-md-12">
						<p>
							<label>Image:</label>
							{{ form.image }}
						</p>
						{% include "error_list.html" with error_list=form.image.errors %}
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
							<p>
								<label>Gallery:</label>
								{{ form.gallery }}
							</p>
							{% include "error_list.html" with error_list=form.gallery.errors %}
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<button type="submit" class="btn btn-primary btn-sm pull-right"><i class="fa fa-plus"></i> Add</button>
					</div>
				</div>
			</form>
		</div>
	</div>
	
	<p>&nbsp;</p>	
	
	<hr>
	
	<p>&nbsp;</p>
	
	<div class="row">
		{% for object in object_list %}
  			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-3">
  				<div class="panel panel-default">
  					<div class="panel-heading">
  						<a href="#" title="online">
	        				{% if object.public %}<span class="label label-success pull-right">on</span>{% endif %}
	        			</a>
                   		<h3 class="panel-title">
                   			{% if object.gallery or object.name %}
                   				{{ object.name|title|truncatechars:35 }}
                   				<small>{{ object.gallery.name|title|truncatechars:35 }}</small>
                   			{% else %}
                   				&nbsp;
                   			{% endif %}
                   		</h3>
                	</div>
	                <div class="panel-image">
							<!-- Modal -->
							<div class="modal fade" id="myModal-{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							        <h3 class="modal-title" id="myModalLabel">{{ object.name }}
							        	<small>{{ object.gallery.name }}</small>							   
							        </h3>
							      </div>
							      <div class="modal-body">
							      	<div class="text-center">
							        	{% thumbnail '500x400' object.image %}
							        </div>
							        <h4>{{ object.description|default_if_none:"" }}</h4>
							      </div>
							      <div class="modal-footer">
							      	<div class="btn-toolbar" role="toolbar">
								      	<a href="{% url 'images:update' object.slug  %}" title="edit"><i class="fa fa-edit fa-lg"></i></a>
		                				<a href="{% url 'images:delete' object.slug  %}" title="delete"><i class="fa fa-trash-o fa-lg text-danger"></i></a>
	                				</div>
							      </div>
							    </div>
							  </div>
							</div>
							<a href="#" data-toggle="modal" data-target="#myModal-{{ forloop.counter }}" title="{{ object.name|title }}">
								{% thumbnail '340x200' object.image -- class="panel-image-preview" %}
	                		</a>
	                </div>
	                
	                <div class="panel-footer text-center">
	                	<a href="{% url 'images:update' object.slug  %}" title="edit"><i class="fa fa-edit fa-lg"></i></a>
	                	<a href="{% url 'images:delete' object.slug  %}" title="delete"><i class="fa fa-trash-o fa-lg text-danger"></i></a>
	                </div>
            	</div>
  			</div>
  		{% empty %}
			<p class="text-center">
				No image found.
			</p>
		{% endfor %}
		 
</div>
	    			
	
{% endblock %}
				